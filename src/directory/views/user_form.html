{% extends "layout.html" %}

{% block title %}{{ 'Edit User' if user else 'Create User' }} - Remote Directory{% endblock %}

{% block content %}
<h2>{{ 'Edit User' if user else 'Create User' }}</h2>

{% if error %}
<div class="error-message" style="background: #f8d7da; color: #721c24; padding: 12px; border-radius: 4px; margin-bottom: 20px;">
    {{ error }}
</div>
{% endif %}

<form method="POST" action="{{ '/users/' + user.id if user else '/users' }}">
    <div class="form-row">
        <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" value="{{ user.email if user else '' }}" required>
        </div>
        
        <div class="form-group">
            <label for="password">Password {{ '*' if not user else '(leave blank to keep current)' }}</label>
            <input type="password" id="password" name="password" {{ 'required' if not user else '' }}>
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="given_name">Given Name</label>
            <input type="text" id="given_name" name="given_name" value="{{ user.given_name if user else '' }}">
        </div>
        
        <div class="form-group">
            <label for="family_name">Family Name</label>
            <input type="text" id="family_name" name="family_name" value="{{ user.family_name if user else '' }}">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="middle_name">Middle Name</label>
            <input type="text" id="middle_name" name="middle_name" value="{{ user.middle_name if user else '' }}">
        </div>
        
        <div class="form-group">
            <label for="nickname">Nickname</label>
            <input type="text" id="nickname" name="nickname" value="{{ user.nickname if user else '' }}">
        </div>
    </div>
    
    <div class="form-group">
        <label for="name">Full Name</label>
        <input type="text" id="name" name="name" value="{{ user.name if user else '' }}">
    </div>
    
    <div class="form-group">
        <label for="preferred_username">Preferred Username</label>
        <input type="text" id="preferred_username" name="preferred_username" value="{{ user.preferred_username if user else '' }}">
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="email_verified">
                <input type="checkbox" id="email_verified" name="email_verified" value="true" {{ 'checked' if user and user.email_verified else '' }}>
                Email Verified
            </label>
        </div>
        
        <div class="form-group">
            <label for="phone_number_verified">
                <input type="checkbox" id="phone_number_verified" name="phone_number_verified" value="true" {{ 'checked' if user and user.phone_number_verified else '' }}>
                Phone Verified
            </label>
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="phone_number">Phone Number</label>
            <input type="tel" id="phone_number" name="phone_number" value="{{ user.phone_number if user else '' }}">
        </div>
        
        <div class="form-group">
            <label for="birthdate">Birthdate</label>
            <input type="date" id="birthdate" name="birthdate" value="{{ user.birthdate if user else '' }}">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="gender">Gender</label>
            <select id="gender" name="gender">
                <option value="">Select...</option>
                <option value="male" {{ 'selected' if user and user.gender == 'male' else '' }}>Male</option>
                <option value="female" {{ 'selected' if user and user.gender == 'female' else '' }}>Female</option>
                <option value="other" {{ 'selected' if user and user.gender == 'other' else '' }}>Other</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="locale">Locale</label>
            <input type="text" id="locale" name="locale" value="{{ user.locale if user else 'en-US' }}" placeholder="en-US">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="zoneinfo">Timezone</label>
            <input type="text" id="zoneinfo" name="zoneinfo" value="{{ user.zoneinfo if user else '' }}" placeholder="America/New_York">
        </div>
        
        <div class="form-group">
            <label for="profile">Profile URL</label>
            <input type="url" id="profile" name="profile" value="{{ user.profile if user else '' }}">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="picture">Picture URL</label>
            <input type="url" id="picture" name="picture" value="{{ user.picture if user else '' }}">
        </div>
        
        <div class="form-group">
            <label for="website">Website</label>
            <input type="url" id="website" name="website" value="{{ user.website if user else '' }}">
        </div>
    </div>
    
    <h3 style="margin-top: 30px; margin-bottom: 15px;">Address</h3>
    
    <div class="form-group">
        <label for="street_address">Street Address</label>
        <input type="text" id="street_address" name="street_address" value="{{ user.address.street_address if user and user.address else '' }}">
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="locality">City/Locality</label>
            <input type="text" id="locality" name="locality" value="{{ user.address.locality if user and user.address else '' }}">
        </div>
        
        <div class="form-group">
            <label for="region">State/Region</label>
            <input type="text" id="region" name="region" value="{{ user.address.region if user and user.address else '' }}">
        </div>
    </div>
    
    <div class="form-row">
        <div class="form-group">
            <label for="postal_code">Postal Code</label>
            <input type="text" id="postal_code" name="postal_code" value="{{ user.address.postal_code if user and user.address else '' }}">
        </div>
        
        <div class="form-group">
            <label for="country">Country</label>
            <input type="text" id="country" name="country" value="{{ user.address.country if user and user.address else '' }}">
        </div>
    </div>
    
    <div class="form-actions">
        <button type="submit" class="btn btn-primary">{{ 'Update User' if user else 'Create User' }}</button>
        <a href="/" class="btn btn-secondary">Cancel</a>
    </div>
</form>
{% endblock %}
