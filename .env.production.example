# Production Environment Variables
#
# SECURITY WARNING: This file contains sensitive information.
# - Do NOT commit this file to version control
# - Use strong, randomly generated values
# - Rotate credentials regularly
#
# Generate strong secrets using: openssl rand -hex 32

# ============================================================================
# OIDC Provider Configuration
# ============================================================================

# Provider Issuer URL (must match actual domain)
ISSUER=https://oidc.example.com

# OAuth Client Configuration
# Generate with: openssl rand -hex 16
CLIENT_ID=your-client-id-here

# Generate with: openssl rand -hex 32
CLIENT_SECRET=your-client-secret-here

# OAuth Redirect URIs (comma-separated)
REDIRECT_URIS=https://app.example.com/callback,https://app.example.com/auth/callback

# Post-logout redirect URIs (comma-separated)
POST_LOGOUT_REDIRECT_URIS=https://app.example.com/logout,https://app.example.com/

# ============================================================================
# Cookie Security
# ============================================================================

# Cookie signing keys (JSON array of strings, 32+ characters each)
# Generate with: echo "[\"$(openssl rand -hex 32)\",\"$(openssl rand -hex 32)\"]"
COOKIES_KEYS=["your-first-key-here","your-second-key-here"]

# ============================================================================
# Directory Service Configuration
# ============================================================================

# Directory type: 'local' (JSON file), 'sqlite' (SQLite database), or 'remote' (HTTP service)
DIRECTORY_TYPE=sqlite

# For local JSON file directory (DIRECTORY_TYPE=local):
# DIRECTORY_USERS_FILE=/data/users.json

# For SQLite database directory (DIRECTORY_TYPE=sqlite):
DIRECTORY_DATABASE_FILE=/data/users.db

# For remote directory service (DIRECTORY_TYPE=remote):
# DIRECTORY_BASE_URL=https://directory.example.com
# DIRECTORY_HEADERS={"Authorization":"Bearer your-token-here"}

# ============================================================================
# Database Configuration
# ============================================================================

# SQLite database path
SQLITE_DB_PATH=/data/oidc.db

# ============================================================================
# Feature Flags
# ============================================================================

# Development interactions (MUST be false in production)
FEATURES_DEV_INTERACTIONS=false

# ============================================================================
# Optional: Advanced Configuration
# ============================================================================

# Proxy mode (if behind reverse proxy)
PROXY=true

# Custom port (usually not needed with Docker)
# PORT=8080

# ============================================================================
# Logging
# ============================================================================

# Log level: debug, info, warn, error
LOG_LEVEL=warn

# ============================================================================
# Notes
# ============================================================================
#
# 1. Client Credentials:
#    - CLIENT_ID: Unique identifier for OAuth client (16-32 hex chars)
#    - CLIENT_SECRET: Secret key for client authentication (32-64 hex chars)
#
# 2. Cookie Keys:
#    - Provide at least 2 keys for rotation
#    - Each key should be 32+ characters
#    - Rotate keys periodically
#
# 3. Redirect URIs:
#    - Must match exactly (including protocol, domain, path)
#    - Add all valid redirect URIs for your application
#
# 4. Directory Options:
#    - local: Load users from JSON file (simple, for small deployments)
#    - sqlite: Use SQLite database (structured, supports roles/groups)
#    - remote: Connect to external HTTP directory service (enterprise)
#
# 5. Security:
#    - Use HTTPS in production (not HTTP)
#    - Keep this file secure (chmod 600)
#    - Don't share credentials
#    - Rotate secrets regularly
#
# ============================================================================
